let t,e,n,r,i,o,l,s,a,u,d,g,c,m,h,p,f,y,E,v;function S(t,e){if(!t.has(e))throw Error(`Key ${e} not found in map`);return t.get(e)}function M(t,e){let n=t.getAttribute(e);if(!n)throw Error(e+" attribute not found");return n}function T(t,e){let n=t.getElementsByTagName(e)[0];if(null==n)throw Error(e+" element not found");return n}function b(t){let e=t.childNodes;if(null==e)throw Error("Element has no childNodes");return e[0]}function C(t){let e=t.nodeValue;if(null==e)throw Error("nodeValue is null");return e}function w(t,e,n){let r="";return n&&void 0!=e&&(r+="\n"+e),r+"</"+t+">"}function x(t,e,n,r,i,o,l){return function(t,e,n,r,i){let o="";if(void 0!=i&&(o+="\n"+i),o+="<"+t,e)for(let[t,n]of e)o+=" "+t+'="'+n.toString()+'"';return n&&r&&(o+=" "+n+'="'+r.toString()+'"'),o+">"}(e,n,r,i,o)+t+w(e,o,l)}function L(t){let e=t.getAttributeNames(),n=new Map;return e.forEach(function(e){let r=t.getAttribute(e);null!=r&&n.set(e,r)}),n}function R(t,e){let n=t.getElementsByTagName(e);if(1!=n.length)throw Error("Expecting 1 "+e+" but finding "+n.length);return n[0]}function B(t){var e="";for(let n=0;n<t.length;n++)e+="<th>"+t[n]+"</th>";return I(e)}function N(t,e=!1){let n="<td";return e&&(n+=' contenteditable="true"'),n+=">"+t+"</td>"}function I(t){return"<tr>"+t+"</tr>\n"}function O(t,e){let n="<"+e;if(t)for(let[e,r]of t)n+=" "+e+'="'+r+'"';return n+" />"}class ${attributes;constructor(t){this.attributes=t}toString(){let t=this.constructor.name+"(";return this.attributes.forEach((e,n)=>{t+=`${n}(${e}), `}),t}toTag(t,e){let n=O(this.attributes,t);return e?"\n"+e+n:"\n"+n}toXML(t,e){return x("",t,this.attributes,void 0,void 0,e,!1)}}class D extends ${value;constructor(t,e){super(t),this.value=e}toString(){return super.toString()+`, ${this.value.toString()})`}toXML(t,e){return x(this.value.toString().trim(),t,this.attributes,void 0,void 0,e,!1)}}class A extends ${values;delimiter=",";constructor(t,e,n){super(t),this.values=e,n&&(this.delimiter=n)}toString(){return super.toString()+`, ${this.values.toString()})`}setDelimiter(t){this.delimiter=t}toXML(t,e){return x(this.values.toString().replaceAll(",",this.delimiter),t,this.attributes,void 0,void 0,e,!1)}}function G(t){return null==t?"":Array.from(t.entries()).map(([t,e])=>`${null==t?"null":t.toString()}(${null==e?"null":e.toString()})`).join(", ")}function P(t,e){return null==t?"":(null==e&&(e=", "),t.map(t=>null==t?"null":t.toString()).join(e))}class X extends ${constructor(t){if(super(t),void 0==t.get("id"))throw Error("id is undefined");if(void 0==t.get("elementType"))throw Error("elementType is undefined")}toString(){return super.toString()+")"}get id(){return this.attributes.get("id")}get elementType(){return this.attributes.get("elementType")}}class k extends ${constructor(t){super(t)}toString(){return super.toString()+")"}}class z extends ${property;constructor(t,e){super(t),this.property=e}toString(){return super.toString()+` property(${this.property.toString()}))`}toXML(t,e){let n;return(void 0!=t&&void 0!=e&&(n=e+t),this.property instanceof D)?x(this.property.toXML("scalar",n),"property",this.attributes,void 0,void 0,e,!0):x(this.property.toXML("array",n),"property",this.attributes,void 0,void 0,e,!0)}}class H extends D{constructor(t,e){super(t,e)}}class _ extends ${deltaEDown;constructor(t,e){super(t),this.deltaEDown=e}toXML(t,e){return void 0==t?x(this.deltaEDown.toXML("me.deltaEDown",e),"me:energyTransferModel",this.attributes,void 0,void 0,e,!1):x(this.deltaEDown.toXML("me.deltaEDown",e),"energyTransferModel",void 0,void 0,void 0,e,!0)}}class F{type;constructor(t){this.type=t}toString(){return`DOSCMethod(type(${this.type}))`}toTag(t){let e=`<me.DOSCMethod xsi:type="${this.type}"/>`;return t?"\n"+t+e:"\n"+e}}class V extends ${id;atoms;bonds;properties;energyTransferModel;dOSCMethod;constructor(t,e,n,r,i,o){super(t);let l=this.attributes.get("id");if(void 0==l)throw Error("id is undefined");this.id=l,this.atoms=e,this.bonds=n,this.properties=r,this.energyTransferModel=i,this.dOSCMethod=o}toString(){let t=`Molecule(id(${this.getID()}), `,e=this.getDescription();void 0!=e&&(t+=`description(${e}), `);let n=this.getActive();return void 0!=n&&(t+=`active(${n}), `),this.atoms.size>0&&(t+=`atoms(${G(this.atoms)}), `),this.bonds.size>0&&(t+=`bonds(${G(this.bonds)}), `),this.properties.size>0&&(t+=`properties(${G(this.properties)}), `),this.energyTransferModel&&(t+=`energyTransferModel(${this.energyTransferModel.toString()}), `),this.dOSCMethod&&(t+=`dOSCMethod(${this.dOSCMethod.toString()}), `),t+")"}getID(){return this.attributes.get("id")}getDescription(){return this.attributes.get("description")}getActive(){let t=this.attributes.get("active");return void 0!=t||t}getEnergy(){let t=this.properties.get("me:ZPE");if(void 0==t)return 0;if(t.property instanceof D)return t.property.value;throw Error("Expected a PropertyScalar but got a PropertyArray and not sure how to handle that.")}setEnergy(t){let e=this.properties.get("me:ZPE");if(void 0==e)throw Error("No me.ZPE property found");if(e.property instanceof A)throw Error("Expected a NumberWithAttributes but got a NumberArrayWithAttributes and not sure how to handle that.");e.property.value=t}getRotationConstants(){let t=this.properties.get("me:rotConsts");return void 0!=t?null==t.property?void 0:t.property instanceof D?[t.property.value]:t.property.values:t}getVibrationFrequencies(){let t=this.properties.get("me:vibFreqs");return void 0!=t?t.property instanceof D?[t.property.value]:t.property instanceof A?t.property.values:void 0:t}toXML(t,e,n){let r="",i="",o="",l="";void 0!=e&&void 0!=n&&(l=(o=(i=(r=e.repeat(n))+e)+e)+e);let s="";for(let t of this.atoms.values())s+=t.toTag("atom",o);this.atoms.size>1&&""!=s&&(s=x(s,"atomArray",void 0,void 0,void 0,i,!0));let a="";for(let t of this.bonds.values())a+=t.toTag("bond",o);""!=a&&(a=x(a,"bondArray",void 0,void 0,void 0,i,!0));let u="";this.properties.forEach(t=>{let e="";t.property instanceof D?e+=t.property.toXML("scalar",l):e+=t.property.toXML("array",l),u+=x(e,"property",t.attributes,void 0,void 0,o,!0)}),this.properties.size>1&&""!=u&&(u=x(u,"propertyList",void 0,void 0,void 0,i,!0));let d="";this.energyTransferModel&&(d=this.energyTransferModel.toXML(e,i));let g="";return this.dOSCMethod&&(g=this.dOSCMethod.toTag(i)),x(s+a+u+d+g,t,this.attributes,void 0,void 0,r,!0)}}class U extends ${molecule;constructor(t,e){super(t),this.molecule=e}toXML(t,e,n){let r="";return void 0!=e&&void 0!=n&&(r=n+e),x(this.toTag("molecule",r),t,void 0,void 0,void 0,n,!0)}}class j extends U{constructor(t,e){super(t,e)}}class W extends U{constructor(t,e){super(t,e)}}class q extends U{constructor(t,e){super(t,e)}getRef(){let t=this.attributes.get("ref");if(null==t)throw Error('Attribute "ref" is undefined.');return t}}class Z extends D{constructor(t,e){super(t,e)}}class J extends D{constructor(t,e){super(t,e)}}class K extends D{constructor(t,e){super(t,e)}}class Q extends ${constructor(t){super(t)}}class Y extends ${mCRCMethodName;constructor(t,e){super(t),this.mCRCMethodName=e}toString(){return`MCRCMethod(name(${this.mCRCMethodName}))`}}class tt extends Y{preExponential;activationEnergy;tInfinity;nInfinity;constructor(t,e,n,r,i){super(t,"MesmerILT"),this.preExponential=e,this.activationEnergy=n,this.tInfinity=r,this.nInfinity=i}toString(){return`MesmerILT(${super.toString()}, preExponential(${this.preExponential}), activationEnergy(${this.activationEnergy}), TInfinity(${this.tInfinity}), nInfinity(${this.nInfinity}))`}toXML(t,e){let n="";void 0!=e&&(n=e+"  ");let r="";void 0!=this.preExponential&&(r=this.preExponential.toXML("me.preExponential",n));let i="";void 0!=this.activationEnergy&&(i=this.activationEnergy.toXML("me.activationEnergy",n));let o="";void 0!=this.tInfinity&&(o=this.tInfinity.toXML("me.nInfinity",n));let l="";return void 0!=this.nInfinity&&(l=this.nInfinity.toXML("me.nInfinity",n)),x(r+i+o+l,t,this.attributes,void 0,void 0,e,!0)}}class te extends ${id;reactants;products;mCRCMethod;transitionState;tunneling;constructor(t,e,n,r,i,o,l){super(t),this.id=e,this.reactants=n,this.products=r,this.mCRCMethod=i,this.transitionState=o,this.tunneling=l}toString(){return super.toString(),super.toString()+`id(${this.id}), `+`reactants(${G(this.reactants)}), `+`products(${G(this.products)}), `+`mCRCMethod(${this.mCRCMethod?.toString()}), `+`transitionState(${this.transitionState?.toString()}), `+`tunneling(${this.tunneling?.toString()}))`}getReactantsLabel(){return Array.from(this.reactants.values()).map(t=>t.molecule.id).join(" + ")}getReactantsEnergy(){return Array.from(this.reactants.values()).map(t=>t.molecule.getEnergy()).reduce((t,e)=>t+e,0)}getProductsLabel(){return Array.from(this.products.values()).map(t=>t.molecule.id).join(" + ")}getProductsEnergy(){return Array.from(this.products.values()).map(t=>t.molecule.getEnergy()).reduce((t,e)=>t+e,0)}getLabel(){return this.getReactantsLabel()+" -> "+this.getProductsLabel()}toXML(t,e,n){let r="",i="";void 0!=e&&void 0!=n&&(i=(r=e.repeat(n))+e);let o="";this.reactants.forEach(t=>{o+=t.toXML("reactant",e,i)});let l="";this.products.forEach(t=>{l+=t.toXML("product",e,i)});let s="";void 0!=this.tunneling&&(s=this.tunneling.toTag("me.tunneling",i));let a="";void 0!=this.transitionState&&(a=this.transitionState.toXML("transitionState",e,i));let u="";return void 0!=this.mCRCMethod&&(u=this.mCRCMethod instanceof tt?this.mCRCMethod.toXML("mCRCMethod",i):this.mCRCMethod.toTag("mCRCMethod",i)),x(o+l+s+a+u,t,this.attributes,void 0,void 0,r,!0)}}function tn(t,e,n,r,i,o,l,s,a,u,d){let g=r+(o-r)/2;ti(t,d,s,e,g-to(t,d,s)/2,l+a),ti(t,u,s,e,g-to(t,u,s)/2,l+3*a),tr(t,e,n,r,i,o,l)}function tr(t,e,n,r,i,o,l){t.beginPath(),t.strokeStyle=e,t.lineWidth=n,t.moveTo(r,i),t.lineTo(o,l),t.stroke()}function ti(t,e,n,r,i,o){t.save(),t.translate(i,o),t.scale(1,-1),t.font=n,t.fillStyle=r,t.fillText(e,0,0),t.restore()}function to(t,e,n){return t.font=n,t.measureText(e).width}class tl extends ${P;T;constructor(t){super(t);let e=t.get("P");if(e)this.P=parseFloat(e);else throw Error("P is undefined");let n=t.get("T");if(n)this.T=parseFloat(n);else throw Error("T is undefined")}}class ts extends U{constructor(t,e){super(t,e)}}class ta{bathGas;pTs;constructor(t,e){this.bathGas=t,this.pTs=e}toString(){return`Conditions(bathGas(${this.bathGas.toString()}), pTs(${this.pTs.toString()}))`}toXML(t,e){let n="";void 0!=t&&void 0!=e&&(n=e+t);let r=this.bathGas.toXML("bathGas",t,n);return this.pTs.forEach(t=>{r+=t.toTag("PTpair",n)}),x(r,"conditions",void 0,void 0,void 0,e,!0)}}class tu extends D{constructor(t,e){super(t,e)}toString(){return`GrainSize(${super.toString()})`}}class td{grainSize;energyAboveTheTopHill;constructor(t,e){this.grainSize=t,this.energyAboveTheTopHill=e}toString(){return`ModelParameters(grainSize(${this.grainSize.toString()}), energyAboveTheTopHill(${this.energyAboveTheTopHill.toString()}))`}toXML(t,e){let n="";void 0!=t&&void 0!=e&&(n=e+t);let r=this.grainSize.toXML("me:GrainSize",n);return r+=x(this.energyAboveTheTopHill.toString(),"me:EnergyAboveTheTopHill",void 0,void 0,void 0,n,!1),x(r,"me:modelParameters",void 0,void 0,void 0,e,!0)}}class tg extends D{constructor(t,e){super(t,e)}}class tc{testDOS;printSpeciesProfile;testMicroRates;testRateConstant;printGrainDOS;printCellDOS;printReactionOperatorColumnSums;printTunnellingCoefficients;printGrainkfE;printGrainBoltzmann;printGrainkbE;eigenvalues;hideInactive;diagramEnergyOffset;constructor(t,e,n,r,i,o,l,s,a,u,d,g,c,m){this.testDOS=t,this.printSpeciesProfile=e,this.testMicroRates=n,this.testRateConstant=r,this.printGrainDOS=i,this.printCellDOS=o,this.printReactionOperatorColumnSums=l,this.printTunnellingCoefficients=s,this.printGrainkfE=a,this.printGrainBoltzmann=u,this.printGrainkbE=d,this.eigenvalues=g,this.hideInactive=c,this.diagramEnergyOffset=m}toString(){return`Control(testDOS(${this.testDOS?.toString()}), printSpeciesProfile(${this.printSpeciesProfile?.toString()}), testMicroRates(${this.testMicroRates?.toString()}), testRateConstant(${this.testRateConstant?.toString()}), printGrainDOS(${this.printGrainDOS?.toString()}), printCellDOS(${this.printCellDOS?.toString()}), printReactionOperatorColumnSums(${this.printReactionOperatorColumnSums?.toString()}), printTunnellingCoefficients(${this.printTunnellingCoefficients?.toString()}), printGrainkfE(${this.printGrainkfE?.toString()}), printGrainBoltzmann(${this.printGrainBoltzmann?.toString()}), printGrainkbE(${this.printGrainkbE?.toString()}), eigenvalues(${this.eigenvalues?.toString()}), hideInactive(${this.hideInactive?.toString()}))`}toXML(t,e){let n="";void 0!=t&&void 0!=e&&(n=e+t);let r="\n";return x(r+=n+O(null,"me:testDOS")+"\n"+(n+O(null,"me:printSpeciesProfile"))+"\n"+(n+O(null,"me:testMicroRates"))+"\n"+(n+O(null,"me:testRateConstant"))+"\n"+(n+O(null,"me:printGrainDOS"))+"\n"+(n+O(null,"me:printCellDOS"))+"\n"+(n+O(null,"me:printReactionOperatorColumnSums"))+"\n"+(n+O(null,"me:printTunnellingCoefficients"))+"\n"+(n+O(null,"me:printGrainkfE"))+"\n"+(n+O(null,"me:printGrainBoltzmann"))+"\n"+(n+O(null,"me:printGrainkbE"))+"\n"+(n+O(null,"me:eigenvalues"))+"\n"+(n+O(null,"me:hideInactive"))+this.diagramEnergyOffset?.toXML("me:diagramEnergyOffset",n),"control",void 0,void 0,null,e,!0)}}var tm={};tm=new URL("sw.464808ce.js",import.meta.url).toString(),"serviceWorker"in navigator&&window.addEventListener("load",function(){let t=new URL(tm);navigator.serviceWorker.register(t)});let th="me:title",tp=new Map([]),tf=-1/0,ty=1/0,tE=new Map([]);const tv=`<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type='text/xsl' href='../../mesmer2.xsl' media='other'?>
<?xml-stylesheet type='text/xsl' href='../../mesmer1.xsl' media='screen'?>`;document.addEventListener("DOMContentLoaded",x=>{h=document.getElementById("xml_title"),p=document.getElementById("xml_text"),window.loadXML=function(){!function x(){(f=document.createElement("input")).type="file",f.onchange=function(){if(f.files){for(let t=0;t<f.files.length;t++)console.log("inputElement.files["+t+"]="+f.files[t]);let i=f.files[0];if(console.log(i.name),r=i.name,null!=p){let o=new FileReader,f=0,x="";o.onload=function(O){if(!O.target)throw Error("Event target is null");if(x+=O.target.result,null!=i){if(f<i.size){let t=i.slice(f,f+1048576);o.readAsText(t),f+=1048576}else{var $;$=x=x.trim(),null!=h&&(h.innerHTML=r),null!=p&&(p.innerHTML=$.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/  /g,"&nbsp;&nbsp;")),function(r){let i,o,h,p,f,x,O,$,G,U;e="\n";let ti=r.documentElement;if(null==ti)throw Error("Document element not found");{let t=ti.tagName;e+="<"+t,console.log(t),n=w(t,"",!0);let r=!0,i=" ".repeat(t.length+2);ti.getAttributeNames().forEach(function(t){let n=ti.getAttribute(t),o=`${t}="${n}"`;r?(r=!1,e+=" "+o):e+="\n"+i+o}),e+=">"}(function(e){if(null==(l=e.getElementsByTagName(th)))throw Error(th+" not found");if(1!=l.length)throw Error("Multiple "+th+" elements found");{console.log("Title="+(t=(t=l[0].childNodes[0].nodeValue).trim()));let e=document.getElementById("title");null!=e&&(e.innerHTML=t)}})(r),function(t){let e="moleculeList";console.log(e);let n=R(t,e);null!=(s=document.getElementById("molecules_title"))&&(s.innerHTML="Molecules");let r=new Set;if(n.childNodes.forEach(function(t){r.add(t.nodeName)}),1!=r.size&&!(2==r.size&&r.has("#text")))throw console.error("moleculeListTagNames:"),r.forEach(t=>console.error(t)),Error("Additional tag names in moleculeList:");if(!r.has("molecule"))throw Error("Expecting molecule tagName but it is not present!");let i=n.getElementsByTagName("molecule");console.log("Number of molecules="+i.length);for(let t=0;t<i.length;t++){let e,n,r,o=L(i[t]),l=new Set;i[t].childNodes.forEach(function(t){l.add(t.nodeName)});let s=new Map;l.delete("atom"),l.delete("atomArray");let a=i[t].getElementsByTagName("atom");for(let t=0;t<a.length;t++){let e=L(a[t]),n=e.get("id");if(void 0!=n){let t=new X(e);s.set(n,t)}}l.delete("bond"),l.delete("bondArray");let u=new Map,d=i[t].getElementsByTagName("bond");for(let t=0;t<d.length;t++){let e=L(d[t]),n=e.get("atomRefs2");if(void 0!=n){let t=new k(e);u.set(n,t)}}let g=new Map;l.delete("property"),l.delete("propertyList");let c=i[t].getElementsByTagName("property");for(let t=0;t<c.length;t++){let e=L(c[t]),n=c[t].children;if(1!=n.length)throw Error("Expecting 1 child but finding "+n.length);let r=L(n[0]),i=n[0].nodeName,o=n[0].textContent;if(null==o)throw console.error("nodeName"),Error("textContent is null");o=o.trim();let s=e.get("dictRef");if(null==s)throw Error("dictRef is null");if("scalar"==i){l.delete("scalar");let t=parseFloat(o);g.set(s,new z(e,new D(r,t))),"me:ZPE"===s&&(ty=Math.min(ty,t),tf=Math.max(tf,t))}else if("array"==i)l.delete("array"),g.set(s,new z(e,new A(r,function(t){let e=[];for(let n=0;n<t.length;n++)e.push(parseFloat(t[n]));return e}(o.split(/\s+/))," ")));else if("matrix"==i);else throw Error("Unexpected nodeName: "+i)}if(l.delete("me:energyTransferModel"),null!=(r=i[t].getElementsByTagName("me:energyTransferModel"))&&r.length>0){if(1!=r.length)throw Error("energyTransferModel length="+r.length);let t=r[0].getElementsByTagName("me:deltaEDown");if(null!=t){if(1!=t.length)throw Error("deltaEDown length="+t.length);let n=parseFloat(C(b(t[0]))),i=new H(L(t[0]),n);e=new _(L(r[0]),i)}}if(l.delete("me:DOSCMethod"),null!=(r=i[t].getElementsByTagName("me:DOSCMethod"))){let t=r[0];if(null!=t&&null!=t){let e=t.getAttribute("xsi:type");null!=e&&(n=new F(e))}}if(l.delete("#text"),l.size>0)throw console.error("Remaining moleculeTagNames:"),l.forEach(t=>console.error(t)),Error("Unexpected tags in molecule.");let m=new V(o,s,u,g,e,n);tp.set(m.id,m)}tp.forEach(function(t,e){let n=e+"_energy",r=document.getElementById(n);r&&r.addEventListener("change",r=>{let i=r.target.value;isNaN(parseFloat(i))?(alert("Energy input for "+e+" is not a number"),document.getElementById(n).value=t.getEnergy().toString(),console.log("inputValue="+i),console.log("Type of inputValue: "+typeof i)):(t.setEnergy(parseFloat(i)),console.log("Set energy of "+e+" to "+i+" kJ/mol"))})})}(r),function(){if(0==tp.size)return;let t=B(["Name","Energy<br>kJ/mol","Rotation constants<br>cm<sup>-1</sup>","Vibration frequencies<br>cm<sup>-1</sup>"]);tp.forEach(function(e,n){let r,i,o=e.getEnergy();i=null==o?"":o.toString();let l="",s=e.getRotationConstants();void 0!=s&&(l=P(s," "));let a="",u=e.getVibrationFrequencies();void 0!=u&&(a=P(u," ")),t+=I(N(n)+N((r='<input type="number"'+(' id="'+(n+"_energy")+'" onchange="setEnergy(this)"'),null!==i&&(r+=' value="'+i+'"'),r+">"))+N(l,!0)+N(a,!0))}),null!==(a=document.getElementById("molecules_table"))&&(a.innerHTML=t)}(),function(t){let e="reactionList";console.log(e);let n=R(t,e).getElementsByTagName("reaction"),r=n.length;if(console.log("Number of reactions="+r),0==r)throw Error("No reactions: There should be at least 1!");null!=(u=document.getElementById("reactions_title"))&&(u.innerHTML="Reactions");for(let t=0;t<r;t++){let e=L(n[t]),r=e.get("id");if(null==r)throw Error("reactionID is null");if(null!=r){let i,o,l;console.log("id="+r);let s=new Map([]),a=n[t].getElementsByTagName("reactant");for(let t=0;t<a.length;t++){let e=T(a[t],"molecule"),n=M(e,"ref");s.set(n,new j(L(e),S(tp,n)))}let u=new Map([]),d=n[t].getElementsByTagName("product");for(let t=0;t<d.length;t++){let e=T(d[t],"molecule"),n=M(e,"ref");u.set(n,new W(L(e),S(tp,n)))}let g=n[t].getElementsByTagName("me:MCRCMethod");if(g.length>0){let t=L(g[0]),e=t.get("name");if(null==e){let e=t.get("xsi:type");if(null!=e&&"me:MesmerILT"===e){let e,n,r,o;let l=g[0].getElementsByTagName("me:preExponential");if(null!=l&&null!=l[0]){let t=parseFloat(C(b(l[0])));e=new Z(L(l[0]),t)}let s=g[0].getElementsByTagName("me:activationEnergy");if(null!=s&&null!=s[0]){let t=parseFloat(C(b(s[0])));n=new J(L(s[0]),t)}let a=g[0].getElementsByTagName("me:TInfinity");if(null!=a&&null!=a[0]){let t=parseFloat(C(b(a[0])));r=new K(L(a[0]),t)}let u=g[0].getElementsByTagName("me:nInfinity");if(null!=u&&null!=u[0]){let t=parseFloat(C(b(u[0])));o=new K(L(u[0]),t)}i=new tt(t,e,n,r,o)}}else i=new Y(t,e)}let c=n[t].getElementsByTagName("me:transitionState");if(c.length>0){let t=c[0].getElementsByTagName("molecule")[0],e=t.getAttribute("ref");o=new q(L(t),S(tp,e))}let m=n[t].getElementsByTagName("me:tunneling");m.length>0&&(l=new Q(L(m[0])));let h=new te(e,r,s,u,i,o,l);tE.set(r,h)}}}(r),function(){if(0==tE.size)return;let t=B(["ID","Reactants","Products","Transition State","PreExponential","Activation Energy","TInfinity","NInfinity"]);tE.forEach(function(e,n){let r=P(Array.from(e.reactants.keys())," "),i=P(Array.from(e.products.keys())," "),o="",l="",s="",a="",u="";if(void 0!=e.transitionState){let t=e.transitionState.attributes.get("name");null!=t&&(o=t)}if(void 0!=e.mCRCMethod){if(e.mCRCMethod instanceof tt)null!=e.mCRCMethod.preExponential&&(l=e.mCRCMethod.preExponential.value.toString()+" "+e.mCRCMethod.preExponential.attributes.get("units")),null!=e.mCRCMethod.activationEnergy&&(s=e.mCRCMethod.activationEnergy.value.toString()+" "+e.mCRCMethod.activationEnergy.attributes.get("units")),null!=e.mCRCMethod.tInfinity&&(a=e.mCRCMethod.tInfinity.toString()),null!=e.mCRCMethod.nInfinity&&(u=e.mCRCMethod.nInfinity.value.toString());else if("RRKM"==e.mCRCMethod.attributes.get("name"));else throw Error("Unexpected mCRCMethod: "+e.mCRCMethod)}t+=I(N(n)+N(r)+N(i)+N(o)+N(l,!0)+N(s,!0)+N(a,!0)+N(u,!0)),null!==(d=document.getElementById("reactions_table"))&&(d.innerHTML=t)})}(),function(){if(tE.size>1){null!=(g=document.getElementById("reactions_diagram_title"))&&(g.innerHTML="Diagram");let t=document.getElementById("reactions_diagram");null!=t&&(t.style.display="block",function(t,e,n,r,i,o,l){var s;let a,u,d,g;console.log("drawReactionDiagram");let c="black",m=t.getContext("2d"),h=(m.font=i,(s=m.measureText("Aj")).actualBoundingBoxAscent+s.actualBoundingBoxDescent),p=new Set,f=new Set,y=new Set,E=new Set,v=new Map,M=new Map,T=0,b=Number.MAX_VALUE,C=Number.MIN_VALUE;n.forEach(function(t,e){let n=t.transitionState,r=t.getReactantsLabel();p.add(r),f.has(r)&&y.add(r);let i=t.getReactantsEnergy();b=Math.min(b,i),C=Math.max(C,i),M.set(r,i);let o=t.getProductsLabel();if(f.add(o),i=t.getProductsEnergy(),b=Math.min(b,i),C=Math.max(C,i),M.set(o,i),!v.has(r)&&(v.set(r,T),T++),v.has(o)){T--;let t=S(v,o);if(v.forEach(function(e,n){e>t&&v.set(n,e-1)}),void 0!=n){let t=n.getRef();E.add(t),v.set(t,T),i=n.molecule.getEnergy(),b=Math.min(b,i),C=Math.max(C,i),M.set(t,i),T++}v.set(o,T),T++}else{if(void 0!=n){let t=n.getRef();E.add(t),v.set(t,T),i=n.molecule.getEnergy(),b=Math.min(b,i),C=Math.max(C,i),M.set(t,i),T++}v.set(o,T),T++}});let w=C-b,x=[];v.forEach(function(t,e){x[t]=e});let L=0,R=0,B=new Map,N=new Map,I=new Map,O=new Map,$=new Map,D=new Map;x.forEach(function(e){let n=S(M,e),r=(n-b)*t.height/(w+0)+0;g=Math.max(to(m,n.toString(),i),to(m,e,i)),u=L+g+5,d=a=r+4,B.set(e,[L,a]),N.set(e,[u,d]),f.has(e)&&(I.set(e,[L,a]),O.set(e,[u,d])),E.has(e)&&($.set(e,[L,a]),D.set(e,[u,d])),L=u+10,R=u}),t.width=R;let A=t.height+4*h+8,G=t.height;t.height=A,m.transform(1,0,0,-1,0,A),n.forEach(function(t,e){let n=t.transitionState,r=t.getReactantsLabel(),i=t.getProductsLabel(),o=S(N,r),l=S(I,i);if(void 0!=n){let t=n.getRef(),e=S($,t);tr(m,c,2,o[0],o[1],e[0],e[1]);let r=S(D,t);tr(m,c,2,r[0],r[1],l[0],l[1])}else tr(m,c,2,o[0],o[1],l[0],l[1])}),p.forEach(function(t){let e=S(M,t),n=(e-b)*G/(w+0)+0,r=S(B,t)[0],l=n+4;tn(m,"blue",o,r,l,S(N,t)[0],l,i,h,t,e.toString())}),f.forEach(function(t){let e=S(M,t),n=(e-b)*G/(w+0)+0,r=S(I,t)[0],l=n+o,s=S(O,t)[0],a=e.toString();y.has(t)?tn(m,"orange",o,r,l,s,l,i,h,t,a):tn(m,"green",o,r,l,s,l,i,h,t,a)}),E.forEach(function(t){let e=S(M,t),n=(e-b)*G/(w+0)+0,r=S($,t)[0],l=n+o;tn(m,"red",o,r,l,S(D,t)[0],l,i,h,t,e.toString())})}(t,0,tE,0,"14px Arial",4,2))}}(),function(t){let e="me:conditions";console.log(e);let n=R(t,e);null!=(c=document.getElementById("conditions_title"))&&(c.innerHTML="Conditions");let r=R(n,"me:bathGas"),i=new ts(L(r),S(tp,r.childNodes[0].nodeValue)),o=R(n,"me:PTs").getElementsByTagName("me:PTpair"),l=[];for(let t=0;t<o.length;t++)l.push(new tl(L(o[t])));y=new ta(i,l)}(r),null!=(i=document.getElementById("bathGas"))&&(i.innerHTML="Bath Gas "+y.bathGas.molecule.getID()),o=document.getElementById("PT_table"),h=B(["P","T"]),null!=o&&(y.pTs.forEach(function(t){h+=I(N(t.P.toString())+N(t.T.toString()))}),o.innerHTML=h),console.log(p="me:modelParameters"),f=R(r,p),null!=(m=document.getElementById("modelParameters_title"))&&(m.innerHTML="Model Parameters"),E=new td(new tu(L(x=R(f,"me:grainSize")),parseFloat(C(b(x)))),parseFloat(C(b(R(f,"me:energyAboveTheTopHill"))))),O=document.getElementById("modelParameters_table"),$=B(["Parameter","Value"])+(I(N("Grain Size")+N(E.grainSize.value.toString()))+I(N("Energy Above The Top Hill")+N(E.energyAboveTheTopHill.toString()))),null!=O&&(O.innerHTML=$),function(t){let e,n,r,i,o,l,s,a,u,d,g,c,m,h,p="me:control";console.log(p);let f=R(t,p),y=document.getElementById("control_title");null!=y&&(y.innerHTML="Control"),f.getElementsByTagName("me:testDOS").length>0&&(e=!0),f.getElementsByTagName("me:printSpeciesProfile").length>0&&(n=!0),f.getElementsByTagName("me:testMicroRates").length>0&&(r=!0),f.getElementsByTagName("me:testRateConstant").length>0&&(i=!0),f.getElementsByTagName("me:printGrainDOS").length>0&&(o=!0),f.getElementsByTagName("me:printCellDOS").length>0&&(l=!0),f.getElementsByTagName("me:printReactionOperatorColumnSums").length>0&&(s=!0),f.getElementsByTagName("me:printTunnellingCoefficients").length>0&&(a=!0),f.getElementsByTagName("me:printGrainkfE").length>0&&(u=!0),f.getElementsByTagName("me:printGrainBoltzmann").length>0&&(d=!0),f.getElementsByTagName("me:printGrainkbE").length>0&&(g=!0);let E=f.getElementsByTagName("me:eigenvalues");E.length>0&&(c=parseFloat(C(b(E[0])))),f.getElementsByTagName("me:hideInactive").length>0&&(m=!0);let S=f.getElementsByTagName("me:diagramEnergyOffset");if(S.length>0){let t=parseFloat(C(b(S[0])));h=new tg(L(S[0]),t)}v=new tc(e,n,r,i,o,l,s,a,u,d,g,c,m,h)}(r),G=document.getElementById("control_table"),U=B(["Control","Value"]),void 0!=v.testDOS&&(U+=I(N("me.testDOS")+N(""))),void 0!=v.printSpeciesProfile&&(U+=I(N("me.printSpeciesProfile")+N(""))),void 0!=v.testMicroRates&&(U+=I(N("me.testMicroRates")+N(""))),void 0!=v.testRateConstant&&(U+=I(N("me.testRateConstant")+N(""))),void 0!=v.printGrainDOS&&(U+=I(N("me.printGrainDOS")+N(""))),void 0!=v.printCellDOS&&(U+=I(N("me.printCellDOS")+N(""))),void 0!=v.printReactionOperatorColumnSums&&(U+=I(N("me.printReactionOperatorColumnSums")+N(""))),void 0!=v.printTunnellingCoefficients&&(U+=I(N("me.printTunnellingCoefficients")+N(""))),void 0!=v.printGrainkfE&&(U+=I(N("me.printGrainkfE")+N(""))),void 0!=v.printGrainBoltzmann&&(U+=I(N("me.printGrainBoltzmann")+N(""))),void 0!=v.printGrainkbE&&(U+=I(N("me.printGrainkbE")+N(""))),void 0!=v.eigenvalues&&(U+=I(N("me.eigenvalues")+N(v.eigenvalues.toString()))),void 0!=v.hideInactive&&(U+=I(N("me.hideInactive")+N(""))),void 0!=v.diagramEnergyOffset&&(U+=I(N("me.diagramEnergyOffset")+N(v.diagramEnergyOffset.value.toString()))),null!=G&&(G.innerHTML=U)}(new DOMParser().parseFromString(x,"text/xml")),fetch("http://localhost:1234/",{method:"POST",headers:{"Content-Type":"text/xml"},body:x}).then(t=>{if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);return t.text()}).then(t=>{console.log("Server response:",t)}).catch(t=>{console.error("There was a problem with the fetch operation:",t)})}}};let O=i.slice(f,f+1048576);o.readAsText(O),f+=1048576}}},f.click(),null!=(i=document.getElementById("load_button"))&&i.addEventListener("click",x),null!=(o=document.getElementById("saveButton"))&&(o.style.display="inline")}()}}),window.setEnergy=function(t){let e=t.id,n=e.split("_")[0],r=tp.get(n);if(void 0!=r){let i=parseFloat(t.value);isNaN(i)?(alert("Energy input for "+n+" is not a number"),document.getElementById(e).value=r.getEnergy().toString()):(r.setEnergy(i),console.log("Energy of "+n+" set to "+i))}},window.saveXML=function(){let i;console.log("saveXML"),"  ".repeat(2);let o="\n  "+x(t,"me:title");i=2;let l="";tp.forEach(function(t,e){l+=t.toXML("molecule","  ",i)}),l=x(l,"moleculeList",void 0,void 0,void 0,"  ",!0),i=2;let s="";tE.forEach(function(t,e){s+=t.toXML("reaction","  ",i)}),s=x(s,"reactionList",void 0,void 0,void 0,"  ",!0);let a=y.toXML("  ","  "),u=E.toXML("  ","  "),d=v.toXML("  ","  "),g=new Blob([tv,e,o,l,s,a,u,d,n],{type:"text/plain"}),c=URL.createObjectURL(g),m=document.createElement("a");m.href=c,m.download=r,document.body.appendChild(m),m.click(),document.body.removeChild(m)};
//# sourceMappingURL=GUI.24c233e8.js.map
